@echo off
echo ==========================================================
echo              æ™ºèƒ½åˆ†ææ¿å—é—®é¢˜è¯Šæ–­å·¥å…·
echo ==========================================================
echo.

cd /d "e:\PyCharm\condaProjects\data_Visualization_Project_Design\backend"

echo ğŸ” æ­£åœ¨è¯Šæ–­æ™ºèƒ½åˆ†ææ¿å—ä¸æ˜¾ç¤ºçš„é—®é¢˜...
echo.

echo æ­¥éª¤1: æ£€æŸ¥MLæ¨¡å—çŠ¶æ€
echo -------------------------------------------------------
python -c "
import sys
import os
sys.path.insert(0, os.getcwd())

try:
    from ml_services import LearningBehaviorClustering, AnomalyDetector
    print('âœ… MLæ¨¡å—å¯¼å…¥æˆåŠŸ')
    
    # æµ‹è¯•åˆå§‹åŒ–
    clustering = LearningBehaviorClustering()
    detector = AnomalyDetector()
    print('âœ… æ¨¡å‹åˆå§‹åŒ–æˆåŠŸ')
    
except Exception as e:
    print(f'âŒ MLæ¨¡å—é—®é¢˜: {str(e)}')
"

echo.
echo æ­¥éª¤2: æ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œç”¨æˆ·æ•°æ®
echo -------------------------------------------------------
python -c "
import sys
import os
sys.path.insert(0, os.getcwd())

try:
    from app import app, User, db
    
    with app.app_context():
        user_count = User.query.count()
        print(f'âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œç”¨æˆ·æ•°é‡: {user_count}')
        
        if user_count < 3:
            print(f'âš ï¸ ç”¨æˆ·æ•°é‡ä¸è¶³ï¼Œéœ€è¦è‡³å°‘3ä¸ªç”¨æˆ·æ‰èƒ½è¿›è¡Œæ™ºèƒ½åˆ†æ')
        else:
            print(f'âœ… ç”¨æˆ·æ•°é‡å……è¶³ï¼Œå¯ä»¥è¿›è¡Œæ™ºèƒ½åˆ†æ')
            
except Exception as e:
    print(f'âŒ æ•°æ®åº“è¿æ¥é—®é¢˜: {str(e)}')
"

echo.
echo æ­¥éª¤3: æµ‹è¯•æ™ºèƒ½åˆ†æAPI
echo -------------------------------------------------------
python test_analysis_quick.py

echo.
echo æ­¥éª¤4: è§£å†³æ–¹æ¡ˆå’Œå»ºè®®
echo -------------------------------------------------------
echo ğŸ“‹ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ:
echo.
echo é—®é¢˜1: æ¨¡å‹è®­ç»ƒæˆåŠŸä½†æ™ºèƒ½åˆ†ææ¿å—ç©ºç™½
echo è§£å†³: 1. åˆ‡æ¢åˆ°æ™ºèƒ½åˆ†ææ ‡ç­¾é¡µ
echo       2. ç‚¹å‡»"åˆ·æ–°åˆ†æ"æŒ‰é’®
echo       3. æˆ–è€…é‡æ–°è¿›è¡Œæ¨¡å‹è®­ç»ƒ
echo.
echo é—®é¢˜2: èšç±»åˆ†ææˆ–å¼‚å¸¸æ£€æµ‹APIè¿”å›é”™è¯¯
echo è§£å†³: 1. ç¡®ä¿ç”¨æˆ·æ•°é‡ â‰¥ 3
echo       2. æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
echo       3. é‡æ–°å¯åŠ¨FlaskæœåŠ¡å™¨
echo.
echo é—®é¢˜3: å‰ç«¯æ˜¾ç¤ºåŠ è½½ä¸­ä½†ä¸€ç›´ä¸å‡ºç»“æœ
echo è§£å†³: 1. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œè¯·æ±‚
echo       2. æŸ¥çœ‹Flaskæ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
echo       3. æ£€æŸ¥CORSé…ç½®
echo.
echo ğŸš€ æ¨èæ“ä½œæ­¥éª¤:
echo -------------------------------------------------------
echo 1. é‡å¯FlaskæœåŠ¡å™¨: python app.py
echo 2. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ç®¡ç†å‘˜é¡µé¢
echo 3. ç‚¹å‡»"æ™ºèƒ½åˆ†æ"æ ‡ç­¾é¡µ
echo 4. å¦‚æœç©ºç™½ï¼Œç‚¹å‡»"åˆ·æ–°åˆ†æ"æŒ‰é’®
echo 5. å¦‚æœä»ç„¶ç©ºç™½ï¼Œå…ˆè¿›è¡Œ"æ¨¡å‹è®­ç»ƒ"
echo 6. è®­ç»ƒå®Œæˆåç³»ç»Ÿä¼šè‡ªåŠ¨åˆ·æ–°æ™ºèƒ½åˆ†ææ•°æ®
echo.
echo ğŸ’¡ è°ƒè¯•æŠ€å·§:
echo - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)
echo - æŸ¥çœ‹Consoleæ ‡ç­¾é¡µçš„é”™è¯¯ä¿¡æ¯
echo - æŸ¥çœ‹Networkæ ‡ç­¾é¡µçš„APIè¯·æ±‚å“åº”
echo - è§‚å¯ŸFlaskæ§åˆ¶å°çš„å®æ—¶æ—¥å¿—
echo.
echo ==========================================================
echo                  è¯Šæ–­å®Œæˆ
echo ==========================================================

pause